<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bingus & Amor's Trip V15 ðŸ’–</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Leaflet CSS & JS (FÃ¼r die Karte - KEIN API KEY NÃ–TIG) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts: Quicksand -->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Quicksand', sans-serif; 
            background-color: #fff1f2;
            background-image: 
                radial-gradient(at 10% 10%, rgba(253, 164, 175, 0.2) 0px, transparent 50%), 
                radial-gradient(at 90% 10%, rgba(251, 191, 36, 0.15) 0px, transparent 50%), 
                radial-gradient(at 50% 90%, rgba(52, 211, 153, 0.15) 0px, transparent 50%);
            background-attachment: fixed;
            color: #4c0519;
            min-height: 100vh;
        }
        
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .modal-enter { animation: modalPop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        @keyframes modalPop { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        
        /* Badges */
        .badge-res-high { background-color: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
        .badge-res-med { background-color: #ffedd5; color: #9a3412; border: 1px solid #fed7aa; }
        .badge-res-low { background-color: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
        
        /* Card Hover */
        .card-hover { transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }
        .card-hover:hover { transform: translateY(-4px) scale(1.01); box-shadow: 0 15px 30px -5px rgba(251, 113, 133, 0.2); z-index: 10; }

        /* Image Handling */
        .img-fallback {
            background-color: #ffe4e6;
            display: flex; align-items: center; justify-content: center;
            color: #fb7185; font-weight: 700; font-size: 1.5rem; letter-spacing: 0.05em;
            width: 100%; height: 100%;
        }
        
        /* Map Styles */
        #map-container { height: 65vh; width: 100%; border-radius: 1.5rem; z-index: 1; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); border: 4px solid white; }
        .emoji-marker {
            display: flex; justify-content: center; align-items: center;
            font-size: 28px;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3));
            transition: transform 0.2s;
            cursor: pointer;
        }
        .emoji-marker:hover { transform: scale(1.3) translateY(-5px); z-index: 1000 !important; }
        
        /* Leaflet Popup Customization */
        .leaflet-popup-content-wrapper { border-radius: 16px; padding: 0; overflow: hidden; }
        .leaflet-popup-content { margin: 0; width: 260px !important; }
        .popup-img { width: 100%; height: 120px; object-fit: cover; background-color: #fce7f3; }
        .popup-content { padding: 12px; font-family: 'Quicksand', sans-serif; }
        
        /* Scrollbars */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #fda4af; border-radius: 20px; }

        /* Animation Keyframes */
        .beer-cursor { transition: left 1s linear; will-change: left; }
        .heart-active { animation: heartPop 0.3s ease-out forwards; }
        @keyframes heartPop { 0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }

        /* Toast Animation */
        .toast-enter { animation: toastUp 0.3s ease-out forwards; }
        @keyframes toastUp { from { opacity: 0; transform: translate(-50%, 20px); } to { opacity: 1; transform: translate(-50%, 0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useRef, useEffect } = React;

        // --- FX RATES ---
        const FX_RATES = { 'HUF': 430, 'EUR': 1.06, 'CZK': 26 };

        // --- DATENBANK (Fusioniert & Korrigiert) ---
        const DB = [
            // TRANSFER
            { id: "t1", lat: 47.5004, lng: 19.0840, city: "Transfer", cat: "Transport", subtag: "train", title: "RegioJet Business Class", cost: 40, time: "2h 40min", res: "Zwingend", address: "Budapest-Keleti, 1087 Budapest", desc: "Route: Budapest -> Wien. 4er-Abteil, Ledersessel. Gratis Sekt/Kaffee.", img: "regiojetbu.jpg" },
            { id: "t2", lat: 48.1850, lng: 16.3779, city: "Transfer", cat: "Transport", subtag: "train", title: "Ã–BB Railjet Business", cost: 80, time: "4h 05min", res: "Zwingend", address: "Wien Hbf, 1100 Wien", desc: "Route: Wien -> Prag. Upgrade zur 1. Klasse. Extrem ruhig.", img: "regiojetbu.jpg" },

            // BUDAPEST - ESSEN
            { id: "b_f1", lat: 47.5040, lng: 19.0628, city: "Budapest", cat: "Essen", subtag: "casual", title: "Menza Ã‰tterem", cost: 35, time: "1.5h", res: "Empfohlen", address: "Liszt Ferenc tÃ©r 2, 1061 Ungarn", desc: "Retro-70er Style Kantine, gehoben. Sehr lecker.", img: "menzatt.jpg" },
            { id: "b_f2", lat: 47.4975, lng: 19.0635, city: "Budapest", cat: "Essen", subtag: "street", title: "Street Food Karavan", cost: 15, time: "45min", res: "Nein", address: "Kazinczy u. 18, 1075 Ungarn", desc: "Direkt neben Szimpla. LÃ¡ngos-Burger.", img: "streetfo.jpg" },
            { id: "b_f3", lat: 47.5004, lng: 19.0657, city: "Budapest", cat: "Essen", subtag: "fine", title: "Mazel Tov", cost: 60, time: "2h", res: "Zwingend", address: "AkÃ¡cfa u. 47, 1072 Ungarn", desc: "Israelische Fusion in schicker Ruine. Tolle AtmosphÃ¤re.", img: "mazelto.jpg" },
            { id: "b_f4", lat: 47.4873, lng: 19.0611, city: "Budapest", cat: "Essen", subtag: "street", title: "Pizza Manufaktura", cost: 20, time: "1h", res: "Nein", address: "LÃ³nyay u. 9, 1093 Ungarn", desc: "Local & Pizza. Entspannt, gÃ¼nstig.", img: "pizzama.jpg" },
            { id: "b_f5", lat: 47.4998, lng: 19.0585, city: "Budapest", cat: "Essen", subtag: "fine", title: "Twentysix", cost: 70, time: "2h", res: "Empfohlen", address: "KirÃ¡ly u. 26, 1061 Ungarn", desc: "Indoor-Dschungel. Mediterran.", img: "twentysix.jpg" },
            { id: "b_f6", lat: 47.4975, lng: 19.0627, city: "Budapest", cat: "Essen", subtag: "casual", title: "GettÃ³ GulyÃ¡s", cost: 30, time: "1.5h", res: "Empfohlen", address: "WesselÃ©nyi u. 18, 1077 Ungarn", desc: "Bestes PÃ¶rkÃ¶lt (Gulasch) im Partyviertel.", img: "gettgu.jpg" },
            { id: "b_f7", lat: 47.4984, lng: 19.0615, city: "Budapest", cat: "Essen", subtag: "casual", title: "Cirkusz", cost: 30, time: "1.5h", res: "Nein", address: "Dob u. 25, 1074 Ungarn", desc: "BerÃ¼hmtester Brunch-Spot.", img: "cirkusz.jpg" },
            { id: "b_f8", lat: 47.5001, lng: 19.0510, city: "Budapest", cat: "Essen", subtag: "street", title: "Bamba Marha", cost: 20, time: "45min", res: "Nein", address: "OktÃ³ber 6. u. 6, 1051 Ungarn", desc: "Top Burger.", img: "bambama.jpg" },
            { id: "b_f9", lat: 47.5025, lng: 19.0640, city: "Budapest", cat: "Essen", subtag: "street", title: "Frici Papa", cost: 15, time: "45min", res: "Nein", address: "KirÃ¡ly u. 55, 1077 Ungarn", desc: "Kantine. Spottbillig.", img: "fricipa.jpg" },
            { id: "b_f10", lat: 47.4968, lng: 19.0598, city: "Budapest", cat: "Essen", subtag: "casual", title: "Dobrumba", cost: 40, time: "1.5h", res: "Empfohlen", address: "Dob u. 5, 1074 Ungarn", desc: "Levante KÃ¼che. Sehr hip.", img: "dobrumba.jpg" },
            { id: "b_f11", lat: 47.4922, lng: 19.0571, city: "Budapest", cat: "Essen", subtag: "fine", title: "Beerstro 14", cost: 50, time: "1.5h", res: "Empfohlen", address: "KÃ¡rolyi utca 12, 1053 Ungarn", desc: "Steaks und Craft Beer.", img: "beerstro14.jpg" },
            { id: "b_f12", lat: 47.5011, lng: 19.0327, city: "Budapest", cat: "Essen", subtag: "casual", title: "Jamie Oliver's Italian", cost: 50, time: "1.5h", res: "MÃ¶glich", address: "SzenthÃ¡romsÃ¡g u. 9-11, 1014 Ungarn", desc: "Solide Lage bei Fischerbastei.", img: "jamieol.jpg" },
            { id: "b_f13", lat: 47.4975, lng: 19.0314, city: "Budapest", cat: "Essen", subtag: "fine", title: "DÃ©rynÃ©", cost: 60, time: "2h", res: "Zwingend", address: "Krisztina tÃ©r 3, 1013 Ungarn", desc: "Treffpunkt der Buda-Elite.", img: "dryn.jpg" },
            { id: "b_f14", lat: 47.4787, lng: 19.0501, city: "Budapest", cat: "Essen", subtag: "street", title: "Moto Pizza", cost: 25, time: "1h", res: "Nein", address: "BartÃ³k BÃ©la Ãºt 46, 1111 Ungarn", desc: "Neapolitanische Pizza.", img: "motopi.jpg" },
            { id: "b_f15", lat: 47.4967, lng: 19.0635, city: "Budapest", cat: "Essen", subtag: "street", title: "Bors Gastro Bar", cost: 15, time: "30min", res: "Nein", address: "Kazinczy u. 10, 1075 Ungarn", desc: "Suppen/Baguettes to go.", img: "borsga.jpg" },
            { id: "b_f16", lat: 47.5055, lng: 19.0372, city: "Budapest", cat: "Essen", subtag: "casual", title: "Franziska", cost: 35, time: "1.5h", res: "Empfohlen", address: "Iskola u. 29, 1011 Ungarn", desc: "Healthy Food, Smoothie Bowls.", img: "franziska.jpg" },
            { id: "b_f17", lat: 47.4980, lng: 19.0647, city: "Budapest", cat: "Essen", subtag: "casual", title: "Vinyl & Wood", cost: 25, time: "1h", res: "Nein", address: "WesselÃ©nyi u. 23, 1077 Ungarn", desc: "Cooles Design, guter Toast.", img: "vinylwo.jpg" },
            { id: "b_f18", lat: 47.4871, lng: 19.0584, city: "Budapest", cat: "Essen", subtag: "street", title: "GroÃŸe Markthalle", cost: 15, time: "1h", res: "Nein", address: "VÃ¡mhÃ¡z krt. 1-3, 1093 Ungarn", desc: "StÃ¤nde (Langos/Wurst).", img: "groema.jpg" },
            { id: "b_f19", lat: 47.5022, lng: 19.0529, city: "Budapest", cat: "Essen", subtag: "street", title: "Pink Pistachio", cost: 20, time: "30min", res: "Nein", address: "HercegprÃ­mÃ¡s u. 15, 1051 Ungarn", desc: "SÃ¼ÃŸes & Eis.", img: "pinkpi.jpg" },
            { id: "b_f20", lat: 47.5031, lng: 19.0552, city: "Budapest", cat: "Essen", subtag: "street", title: "Retro LÃ¡ngos", cost: 10, time: "30min", res: "Nein", address: "Bajcsy-Zsilinszky Ãºt 25, 1065 Ungarn", desc: "Der Klassiker fÃ¼r LÃ¡ngos.", img: "retroln.jpg" },
            { id: "b_f21", lat: 47.5022, lng: 19.0529, city: "Budapest", cat: "Essen", subtag: "street", title: "Cookie Beacon", cost: 20, time: "45min", res: "Nein", address: "HercegprÃ­mÃ¡s u. 15, 1051 Ungarn", desc: "Massive Cookies & Brunch.", img: "cookiebe.jpg" },
            { id: "b_f22", lat: 47.4960, lng: 19.0531, city: "Budapest", cat: "Essen", subtag: "street", title: "Buddy's Smash Burgers", cost: 20, time: "45min", res: "Nein", address: "FehÃ©r HajÃ³ u. 8, 1052 Ungarn", desc: "Smashed Burger.", img: "buddys.jpg" },
            { id: "b_f23", lat: 47.4996, lng: 19.0501, city: "Budapest", cat: "Essen", subtag: "casual", title: "Retek Bistro", cost: 40, time: "1.5h", res: "Empfohlen", address: "MÃ©rleg u. 10, 1051 Ungarn", desc: "Klassisch ungarisch.", img: "retekbi.jpg" },
            { id: "b_f24", lat: 47.4902, lng: 19.0646, city: "Budapest", cat: "Essen", subtag: "fine", title: "Arquitecto Pitpit", cost: 50, time: "2h", res: "Empfohlen", address: "Ã–tpacsirta u. 2, 1088 Ungarn", desc: "Tapas im Innenhof.", img: "arquitectopi.jpg" },
            { id: "b_f25", lat: 47.4960, lng: 19.0527, city: "Budapest", cat: "Essen", subtag: "street", title: "Crudo Pizza", cost: 25, time: "1h", res: "Nein", address: "FehÃ©r HajÃ³ u. 2-6, 1052 Ungarn", desc: "Pizza & Wine.", img: "crudopi.jpg" },
            { id: "b_f26", lat: 47.4994, lng: 19.0606, city: "Budapest", cat: "Essen", subtag: "street", title: "Fluffy and me Pancake", cost: 20, time: "45min", res: "Nein", address: "Kazinczy u. 52 C, 1075 Ungarn", desc: "Fluffige japanische Pancakes.", img: "fluffyan.jpg" },
            { id: "b_f27", lat: 47.5115, lng: 19.0573, city: "Budapest", cat: "Essen", subtag: "street", title: "McDonalds Nyugati", cost: 15, time: "30min", res: "Nein", address: "TerÃ©z krt. 55, 1062 Ungarn", desc: "Der schÃ¶nste McDonalds der Welt.", img: "mcdonaldsny.jpg" },

            // BUDAPEST - AKTIVITÃ„T
            { id: "b_a1", lat: 47.5069, lng: 19.0650, city: "Budapest", cat: "AktivitÃ¤t", subtag: "culture", title: "House of Terror", cost: 15, time: "2h", res: "Nein", address: "AndrÃ¡ssy Ãºt 60, 1062 Ungarn", desc: "Museum Nazi- & Sowjetzeit.", img: "houseof.jpg" },
            { id: "b_a2", lat: 47.5203, lng: 19.0551, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Mandala Day Spa", cost: 100, time: "3h+", res: "Zwingend", address: "Ipoly u. 8, 1133 Ungarn", desc: "Luxus pur, Massagen.", img: "mandalada.jpg" },
            { id: "b_a3", lat: 47.4989, lng: 19.0788, city: "Budapest", cat: "AktivitÃ¤t", subtag: "culture", title: "Chimney Cake Workshop", cost: 35, time: "1.5h", res: "Zwingend", address: "RÃ¡kÃ³czi Ãºt 73, 1088 Ungarn", desc: "KÃ¼rtÅ‘skalÃ¡cs selber backen.", img: "chimneyca.jpg" },
            { id: "b_a4", lat: 47.5146, lng: 19.0544, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Flippermuseum", cost: 15, time: "2h+", res: "Nein", address: "RadnÃ³ti MiklÃ³s u. 18, 1137 Ungarn", desc: "140+ Automaten Free Play.", img: "flippermuseum.jpg" },
            { id: "b_a5", lat: 47.5008, lng: 19.0540, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "St. Stephans Basilika", cost: 10, time: "1h", res: "Nein", address: "Szent IstvÃ¡n tÃ©r 1, 1051 Ungarn", desc: "Hoch auf die Kuppel fÃ¼r den Ausblick.", img: "stst.jpg" },
            { id: "b_a6", lat: 47.4962, lng: 19.0398, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Budaer Burgviertel", cost: 15, time: "2h", res: "Nein", address: "Szent GyÃ¶rgy tÃ©r 2, 1014 Ungarn", desc: "Mit Standseilbahn hoch. Aussicht genieÃŸen.", img: "budaerbu.jpg" },
            { id: "b_a7", lat: 47.5042, lng: 19.0448, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Schuhe am Donauufer", cost: 0, time: "30min", res: "Nein", address: "Id. Antall JÃ³zsef rkp., 1054 Ungarn", desc: "Bewegendes Mahnmal.", img: "schuheam.jpg" },
            { id: "b_a8", lat: 47.5048, lng: 19.0528, city: "Budapest", cat: "AktivitÃ¤t", subtag: "culture", title: "Light Art Museum", cost: 25, time: "1.5h", res: "Empfohlen", address: "Hold u. 13, 1054 Ungarn", desc: "Trippy Lichtinstallationen.", img: "lightar.jpg" },
            { id: "b_a9", lat: 47.4992, lng: 19.0350, city: "Budapest", cat: "AktivitÃ¤t", subtag: "culture", title: "House of Houdini", cost: 15, time: "1h", res: "Nein", address: "DÃ­sz tÃ©r 11, 1014 Ungarn", desc: "Im Burgviertel. Mit Live-Zaubershow.", img: "houseofhou.jpg" },
            { id: "b_a10", lat: 47.5023, lng: 19.0344, city: "Budapest", cat: "AktivitÃ¤t", subtag: "culture", title: "Fischerbastei", cost: 10, time: "1h", res: "Nein", address: "SzenthÃ¡romsÃ¡g tÃ©r, 1014 Ungarn", desc: "Der Fotospot schlechthin.", img: "fischerbastei.jpg" },
            { id: "b_a11", lat: 47.5008, lng: 19.0314, city: "Budapest", cat: "AktivitÃ¤t", subtag: "culture", title: "Hospital in the Rock", cost: 20, time: "1.5h", res: "Empfohlen", address: "Lovas Ãºt 4/c, 1012 Ungarn", desc: "Atombunker/Hospital.", img: "hospitalin.jpg" },
            { id: "b_a12", lat: 47.5165, lng: 18.9747, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Zugliget Chairlift", cost: 15, time: "1h", res: "Nein", address: "Zugligeti Ãºt 97, 1121 Ungarn", desc: "Sessellift.", img: "zugligetch.jpg" },
            { id: "b_a13", lat: 47.5022, lng: 19.0603, city: "Budapest", cat: "AktivitÃ¤t", subtag: "culture", title: "Museum of Sweets & Selfies", cost: 20, time: "1h", res: "Empfohlen", address: "Paulay Ede u. 43, 1061 Ungarn", desc: "Instagram Fotos.", img: "museumof.jpg" },
            { id: "b_a14", lat: 47.4597, lng: 19.0515, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Cyberjump", cost: 20, time: "1.5h", res: "Empfohlen", address: "Hengermalom Ãºt 19, 1117 Ungarn", desc: "Trampolin Park.", img: "cyberjump.jpg" },
            { id: "b_a15", lat: 47.4980, lng: 19.0516, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Budapest Eye", cost: 15, time: "20min", res: "Nein", address: "ErzsÃ©bet tÃ©r, 1051 Ungarn", desc: "Riesenrad.", img: "budapestey.jpg" },
            { id: "b_a16", lat: 47.4982, lng: 19.0598, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Gozsdu Udvar Arcade", cost: 10, time: "30min", res: "Nein", address: "Dob u. 16, 1075 Ungarn", desc: "Airhockey.", img: "gozsduud.jpg" },
            { id: "b_a17", lat: 47.5060, lng: 19.0390, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Donau Night Walk", cost: 0, time: "1h", res: "Nein", address: "Bem rkp., 1011 Ungarn", desc: "Parlament leuchtet.", img: "donauni.jpg" },
            { id: "b_a18", lat: 47.4891, lng: 19.0478, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Rudas Bad", cost: 35, time: "3h", res: "Nein", address: "DÃ¶brentei tÃ©r 9, 1013 Ungarn", desc: "TÃ¼rkisches Bad.", img: "rudasba.jpg" },
            { id: "b_a19", lat: 47.5180, lng: 19.0371, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "LukÃ¡cs Bad", cost: 25, time: "3h", res: "Nein", address: "Frankel LeÃ³ Ãºt 25-29, 1023 Ungarn", desc: "Favorit der Einheimischen.", img: "lukcsba.jpg" },
            { id: "b_a20", lat: 47.5273, lng: 19.0479, city: "Budapest", cat: "AktivitÃ¤t", subtag: "relax", title: "Palatinus Strand", cost: 20, time: "4h", res: "Nein", address: "Margitsziget, 1007 Ungarn", desc: "Freibad Margareteninsel.", img: "palatinusst.jpg" },

            // BUDAPEST - PARTY
            { id: "b_p1", lat: 47.4969, lng: 19.0633, city: "Budapest", cat: "Party", subtag: "bar", title: "Szimpla Kert", cost: 15, time: "Open End", res: "Nein", address: "Kazinczy u. 14, 1075 Ungarn", desc: "Muss sein. Ruinenbar.", img: "szimplake.jpg" },
            { id: "b_p2", lat: 47.5005, lng: 19.0655, city: "Budapest", cat: "Party", subtag: "club", title: "Instant-Fogas", cost: 10, time: "Bis 06:00", res: "Nein", address: "AkÃ¡cfa u. 49-51, 1073 Ungarn", desc: "Riesiges Labyrinth, 7 Floors.", img: "instantfogas.jpg" },
            { id: "b_p3", lat: 47.4976, lng: 19.0610, city: "Budapest", cat: "Party", subtag: "bar", title: "Hotsy Totsy", cost: 40, time: "2h", res: "Empfohlen", address: "SÃ­p u. 24, 1075 Ungarn", desc: "High-End Cocktails.", img: "hotsyto.jpg" },
            { id: "b_p4", lat: 47.4979, lng: 19.0596, city: "Budapest", cat: "Party", subtag: "club", title: "Aether", cost: 20, time: "Bis 06:00", res: "Nein", address: "Kiraly u. 13 (Gozsdu), 1075 Ungarn", desc: "Techno/House Keller.", img: "aether.jpg" },
            { id: "b_p5", lat: 47.5005, lng: 19.0507, city: "Budapest", cat: "Party", subtag: "club", title: "Ã–tkert", cost: 20, time: "Bis 05:00", res: "Nein", address: "ZrÃ­nyi u. 4/A, 1051 Ungarn", desc: "Posher, R&B Hits.", img: "tkert.jpg" },
            { id: "b_p6", lat: 47.4991, lng: 19.0461, city: "Budapest", cat: "Party", subtag: "bar", title: "Pontoon", cost: 0, time: "Open End", res: "Nein", address: "Id. Antall JÃ³zsef rkp. 1, 1051 Ungarn", desc: "Open Air an der BrÃ¼cke.", img: "pontoon.jpg" },
            { id: "b_p7", lat: 47.4600, lng: 19.0575, city: "Budapest", cat: "Party", subtag: "bar", title: "DÃ¼rer Kert", cost: 15, time: "Open End", res: "Nein", address: "Ã–bÃ¶l u. 1, 1117 Ungarn", desc: "Alternative Szene, Garten.", img: "drerke.jpg" },
            { id: "b_p8", lat: 47.4928, lng: 19.0496, city: "Budapest", cat: "Party", subtag: "club", title: "Budapest Boat Party", cost: 40, time: "22:00-00:00", res: "Ticket", address: "PetÅ‘fi tÃ©r 9, 1052 Ungarn", desc: "Auf Schiff saufen.", img: "budapestbo.jpg" },
            { id: "b_p9", lat: 47.4993, lng: 19.0563, city: "Budapest", cat: "Party", subtag: "bar", title: "Boutiq'Bar", cost: 40, time: "2h", res: "Empfohlen", address: "Paulay Ede u. 5, 1061 Ungarn", desc: "Weltklasse Cocktails.", img: "boutiqbar.jpg" },
            { id: "b_p10", lat: 47.4928, lng: 19.0602, city: "Budapest", cat: "Party", subtag: "bar", title: "Csendes LÃ©tterem", cost: 15, time: "2h", res: "Nein", address: "Ferenczy IstvÃ¡n u. 5, 1053 Ungarn", desc: "Surreale Vintage-Bar.", img: "csendeslt.jpg" },
            { id: "b_p11", lat: 47.4836, lng: 19.0727, city: "Budapest", cat: "Party", subtag: "bar", title: "Ã‰lesztÅ‘hÃ¡z", cost: 20, time: "2h", res: "Nein", address: "TÅ±zoltÃ³ u. 22, 1094 Ungarn", desc: "Ruinen-Pub fÃ¼r Craft Beer.", img: "leszthz.jpg" },
            { id: "b_p12", lat: 47.4981, lng: 19.0555, city: "Budapest", cat: "Party", subtag: "bar", title: "Madhouse", cost: 25, time: "2h", res: "Nein", address: "Anker kÃ¶z 1-3, 1061 Ungarn", desc: "Bistro der Mad Scientist Brauerei.", img: "madhouse.jpg" },

            // WIEN - ESSEN
            { id: "w_f1", lat: 48.2100, lng: 16.3683, city: "Wien", cat: "Essen", subtag: "casual", title: "Schwarzes Kameel", cost: 35, time: "1h", res: "Nein", address: "Bognergasse 5, 1010 Wien", desc: "MUST-DO. Stehbuffet, BrÃ¶tchen & Wein. Society Treff.", img: "schwarzeska.jpg" },
            { id: "w_f2", lat: 48.2094, lng: 16.3748, city: "Wien", cat: "Essen", subtag: "casual", title: "FiglmÃ¼ller", cost: 45, time: "1.5h", res: "Zwingend", address: "Wollzeile 5, 1010 Wien", desc: "Heimat des Schnitzels.", img: "figlmller.jpg" },
            { id: "w_f3", lat: 48.1979, lng: 16.3621, city: "Wien", cat: "Essen", subtag: "casual", title: "Naschmarkt (NENI)", cost: 35, time: "1.5h", res: "Empfohlen", address: "Naschmarkt 510, 1060 Wien", desc: "Israelisch am Markt.", img: "naschmarkt.jpg" },
            { id: "w_f4", lat: 48.2135, lng: 16.3816, city: "Wien", cat: "Essen", subtag: "fine", title: "Mochi", cost: 80, time: "2h", res: "Zwingend", address: "PraterstraÃŸe 15, 1020 Wien", desc: "Bestes Sushi/Fusion.", img: "mochi.jpg" },
            { id: "w_f5", lat: 48.2048, lng: 16.3436, city: "Wien", cat: "Essen", subtag: "fine", title: "Seven North", cost: 70, time: "2.5h", res: "Empfohlen", address: "Schottenfeldgasse 74, 1070 Wien", desc: "Eyal Shani. Laut, international.", img: "sevenno.jpg" },
            { id: "w_f6", lat: 48.2025, lng: 16.3492, city: "Wien", cat: "Essen", subtag: "casual", title: "Schnitzelwirt", cost: 30, time: "1h", res: "Nein", address: "Neubaugasse 52, 1070 Wien", desc: "Riesige Portionen, gÃ¼nstig.", img: "schnitzelwirt.jpg" },
            { id: "w_f7", lat: 48.1987, lng: 16.3663, city: "Wien", cat: "Essen", subtag: "street", title: "Swing Kitchen", cost: 20, time: "45min", res: "Nein", address: "Operngasse 24, 1040 Wien", desc: "Bester veganer Burger.", img: "swingki.jpg" },
            { id: "w_f8", lat: 48.2022, lng: 16.3676, city: "Wien", cat: "Essen", subtag: "street", title: "Leberkas-Pepi", cost: 8, time: "15min", res: "Nein", address: "Operngasse 12, 1010 Wien", desc: "Bester LeberkÃ¤se.", img: "leberkaspepi.jpg" },
            { id: "w_f9", lat: 48.2030, lng: 16.3549, city: "Wien", cat: "Essen", subtag: "fine", title: "Tian Bistro", cost: 60, time: "2h", res: "Empfohlen", address: "Schrankgasse 4, 1070 Wien", desc: "Vegetarisches Fine Dining.", img: "tianbi.jpg" },
            { id: "w_f10", lat: 48.2097, lng: 16.3751, city: "Wien", cat: "Essen", subtag: "fine", title: "Lugeck", cost: 50, time: "2h", res: "Zwingend", address: "Lugeck 4, 1010 Wien", desc: "Modernes Wirtshaus.", img: "lugeck.jpg" },
            { id: "w_f11", lat: 48.1984, lng: 16.3624, city: "Wien", cat: "Essen", subtag: "casual", title: "CafÃ© Drechsler", cost: 25, time: "1h", res: "Nein", address: "Linke Wienzeile 22, 1060 Wien", desc: "Klassisches Kaffeehaus.", img: "cafdr.jpg" },
            { id: "w_f12", lat: 48.1977, lng: 16.3650, city: "Wien", cat: "Essen", subtag: "casual", title: "Vollpension", cost: 25, time: "1.5h", res: "Empfohlen", address: "SchleifmÃ¼hlgasse 16, 1040 Wien", desc: "Kuchen von Omas.", img: "vollpension.jpg" },
            { id: "w_f13", lat: 48.2028, lng: 16.3533, city: "Wien", cat: "Essen", subtag: "casual", title: "Ulrich", cost: 35, time: "1.5h", res: "Empfohlen", address: "Sankt-Ulrichs-Platz 1, 1070 Wien", desc: "Top FrÃ¼hstÃ¼ck.", img: "ulrich.jpg" },
            { id: "w_f14", lat: 48.2129, lng: 16.3800, city: "Wien", cat: "Essen", subtag: "fine", title: "Das Loft", cost: 60, time: "2h", res: "Zwingend", address: "PraterstraÃŸe 1, 1020 Wien", desc: "Teurer Brunch mit Blick.", img: "daslo.jpg" },
            { id: "w_f15", lat: 48.2139, lng: 16.4016, city: "Wien", cat: "Essen", subtag: "casual", title: "Schweizerhaus", cost: 40, time: "2h", res: "Nein", address: "Prater 116, 1020 Wien", desc: "Stelze und Bier.", img: "schweizerhaus.jpg" },
            { id: "w_f16", lat: 48.2032, lng: 16.3571, city: "Wien", cat: "Essen", subtag: "casual", title: "Glacis Beisl", cost: 45, time: "2h", res: "Empfohlen", address: "Breite G. 4, 1070 Wien", desc: "Versteckt im MQ.", img: "glacisbe.jpg" },
            { id: "w_f17", lat: 48.2193, lng: 16.3770, city: "Wien", cat: "Essen", subtag: "street", title: "Pizza Mari", cost: 25, time: "1h", res: "Nein", address: "Leopoldsgasse 23A, 1020 Wien", desc: "Beste Pizza.", img: "pizzamari.jpg" },
            { id: "w_f18", lat: 48.2109, lng: 16.3771, city: "Wien", cat: "Essen", subtag: "street", title: "Fenster CafÃ©", cost: 10, time: "15min", res: "Nein", address: "Griechengasse 10, 1010 Wien", desc: "Kaffee in der Waffel.", img: "fensterca.jpg" },
            { id: "w_f19", lat: 48.2107, lng: 16.3651, city: "Wien", cat: "Essen", subtag: "casual", title: "CafÃ© Central", cost: 30, time: "1h", res: "Nein", address: "Herrengasse 14, 1010 Wien", desc: "Touristisch, aber schÃ¶n.", img: "cafce.jpg" },
            { id: "w_f20", lat: 48.2171, lng: 16.3627, city: "Wien", cat: "Essen", subtag: "street", title: "Der Wiener Deewan", cost: 15, time: "45min", res: "Nein", address: "LiechtensteinstraÃŸe 10, 1090 Wien", desc: "Pay as you wish.", img: "derwi.jpg" },
            { id: "w_f21", lat: 48.2046, lng: 16.3683, city: "Wien", cat: "Essen", subtag: "street", title: "Bitzinger", cost: 10, time: "15min", res: "Nein", address: "Albertinaplatz 1, 1010 Wien", desc: "Bester WÃ¼rstelstand.", img: "bitzinger.jpg" },
            { id: "w_f22", lat: 48.2026, lng: 16.3591, city: "Wien", cat: "Essen", subtag: "street", title: "Burger Bros", cost: 20, time: "45min", res: "Nein", address: "Museumsplatz 1, 1070 Wien", desc: "Casual Burger.", img: "burgerbr.jpg" },
            { id: "w_f23", lat: 48.1968, lng: 16.3453, city: "Wien", cat: "Essen", subtag: "street", title: "Ivy's Pho", cost: 20, time: "45min", res: "Nein", address: "Mariahilfer Str. 103, 1060 Wien", desc: "Vietnamesisch.", img: "ivysph.jpg" },
            { id: "w_f24", lat: 48.2058, lng: 16.3561, city: "Wien", cat: "Essen", subtag: "casual", title: "1500 Foodmakers", cost: 40, time: "1.5h", res: "Empfohlen", address: "MuseumstraÃŸe 9, 1070 Wien", desc: "Im 25hours Hotel.", img: "1500fo.jpg" },
            { id: "w_f25", lat: 48.2121, lng: 16.3778, city: "Wien", cat: "Essen", subtag: "fine", title: "Motto am Fluss", cost: 50, time: "2h", res: "Empfohlen", address: "Franz-Josefs-Kai 2, 1010 Wien", desc: "Schiff-Design.", img: "mottoam.jpg" },
            { id: "w_f26", lat: 48.2002, lng: 16.3617, city: "Wien", cat: "Essen", subtag: "casual", title: "Ramien", cost: 30, time: "1h", res: "Nein", address: "Gumpendorfer Str. 9, 1060 Wien", desc: "Asiatisch.", img: "ramien.jpg" },

            // WIEN - AKTIVITÃ„T
            { id: "w_a1", lat: 48.2046, lng: 16.3683, city: "Wien", cat: "AktivitÃ¤t", subtag: "culture", title: "Albertina", cost: 20, time: "2h", res: "Nein", address: "Albertinaplatz 1, 1010 Wien", desc: "PrunkrÃ¤ume & Kunst.", img: "albertina.jpg" },
            { id: "w_a2", lat: 48.2075, lng: 16.3940, city: "Wien", cat: "AktivitÃ¤t", subtag: "culture", title: "Hundertwasserhaus", cost: 0, time: "30min", res: "Nein", address: "Kegelgasse 36-38, 1030 Wien", desc: "Architektur Fotos.", img: "hundertwasserhaus.jpg" },
            { id: "w_a3", lat: 48.2036, lng: 16.4233, city: "Wien", cat: "AktivitÃ¤t", subtag: "relax", title: "Prater", cost: 30, time: "3h", res: "Nein", address: "1020 Wien", desc: "VergnÃ¼gungspark.", img: "prater.jpg" },
            { id: "w_a4", lat: 48.2160, lng: 16.3513, city: "Wien", cat: "AktivitÃ¤t", subtag: "culture", title: "Narrenturm", cost: 15, time: "1h", res: "Nein", address: "Spitalgasse 2, 1090 Wien", desc: "Pathologisch-anatomisch.", img: "narrenturm.jpg" },
            { id: "w_a5", lat: 48.2045, lng: 16.3620, city: "Wien", cat: "AktivitÃ¤t", subtag: "culture", title: "KHM", cost: 20, time: "2h", res: "Nein", address: "Maria-Theresien-Platz, 1010 Wien", desc: "Kunsthistorisches Museum.", img: "khm.jpg" },
            { id: "w_a6", lat: 48.1850, lng: 16.3116, city: "Wien", cat: "AktivitÃ¤t", subtag: "culture", title: "Schloss SchÃ¶nbrunn", cost: 0, time: "2h", res: "Nein", address: "SchÃ¶nbrunner SchloÃŸstraÃŸe 47, 1130 Wien", desc: "Park ist gratis.", img: "schlosssc.jpg" },
            { id: "w_a7", lat: 48.1976, lng: 16.3530, city: "Wien", cat: "AktivitÃ¤t", subtag: "relax", title: "Haus des Meeres", cost: 25, time: "2h", res: "Nein", address: "Fritz-GrÃ¼nbaum-Platz 1, 1060 Wien", desc: "Aquarium im Flakturm.", img: "hausde.jpg" },
            { id: "w_a8", lat: 48.1434, lng: 16.4006, city: "Wien", cat: "AktivitÃ¤t", subtag: "relax", title: "Therme Wien", cost: 40, time: "4h", res: "Nein", address: "KurbadstraÃŸe 14, 1100 Wien", desc: "Moderne Therme.", img: "thermewi.jpg" },
            { id: "w_a9", lat: 48.1742, lng: 16.3791, city: "Wien", cat: "AktivitÃ¤t", subtag: "relax", title: "Amalienbad", cost: 10, time: "2h", res: "Nein", address: "Reumannplatz 23, 1100 Wien", desc: "Historisches Hallenbad.", img: "amalienbad.jpg" },
            { id: "w_a10", lat: 48.2128, lng: 16.3924, city: "Wien", cat: "AktivitÃ¤t", subtag: "relax", title: "Donaukanal", cost: 0, time: "1h", res: "Nein", address: "Donaukanal, 1010 Wien", desc: "Graffiti & Chillen.", img: "donaukanal.jpg" },
            { id: "w_a11", lat: 48.1912, lng: 16.3798, city: "Wien", cat: "AktivitÃ¤t", subtag: "culture", title: "Belvedere", cost: 20, time: "1.5h", res: "Empfohlen", address: "Prinz Eugen-StraÃŸe 27, 1030 Wien", desc: "Klimt's Kuss.", img: "belvedere.jpg" },
            { id: "w_a12", lat: 48.2038, lng: 16.3657, city: "Wien", cat: "AktivitÃ¤t", subtag: "relax", title: "Schmetterlinghaus", cost: 10, time: "30min", res: "Nein", address: "Hofburg, 1010 Wien", desc: "Im Burggarten.", img: "schmetterlinghaus.jpg" },
            { id: "w_a13", lat: 48.2057, lng: 16.3627, city: "Wien", cat: "AktivitÃ¤t", subtag: "culture", title: "Weltmuseum", cost: 15, time: "1.5h", res: "Nein", address: "Heldenplatz, 1010 Wien", desc: "Ethnologie.", img: "weltmuseum.jpg" },
            { id: "w_a14", lat: 48.2038, lng: 16.3731, city: "Wien", cat: "AktivitÃ¤t", subtag: "culture", title: "Haus der Musik", cost: 15, time: "1.5h", res: "Nein", address: "SeilerstÃ¤tte 30, 1010 Wien", desc: "Interaktiv.", img: "hausdermusik.jpg" },
            { id: "w_a15", lat: 48.2016, lng: 16.3691, city: "Wien", cat: "AktivitÃ¤t", subtag: "culture", title: "Dritte Mann Tour", cost: 25, time: "1h", res: "Ticket", address: "Karlsplatz, 1010 Wien", desc: "Kanaltour.", img: "drittema.jpg" },
            { id: "w_a16", lat: 48.2082, lng: 16.3682, city: "Wien", cat: "AktivitÃ¤t", subtag: "culture", title: "Time Travel Vienna", cost: 20, time: "1h", res: "Nein", address: "Habsburgergasse 10A, 1010 Wien", desc: "5D Show.", img: "timetr.jpg" },

            // WIEN - PARTY
            { id: "w_p1", lat: 48.2067, lng: 16.3605, city: "Wien", cat: "Party", subtag: "club", title: "Volksgarten", cost: 20, time: "Bis 05:00", res: "Nein", address: "Volksgarten, 1010 Wien", desc: "Schicker Club im Park.", img: "volksgarten.jpg" },
            { id: "w_p2", lat: 48.2348, lng: 16.3608, city: "Wien", cat: "Party", subtag: "club", title: "Grelle Forelle", cost: 20, time: "Bis 06:00", res: "Nein", address: "Spittelauer LÃ¤nde 12, 1090 Wien", desc: "Techno, Fotoverbot.", img: "grellefo.jpg" },
            { id: "w_p3", lat: 48.1926, lng: 16.3377, city: "Wien", cat: "Party", subtag: "bar", title: "Travel Shack", cost: 5, time: "Bis 04:00", res: "Nein", address: "Mariahilfer GÃ¼rtel 21, 1150 Wien", desc: "Backpacker, Shots.", img: "travelsh.jpg" },
            { id: "w_p4", lat: 48.2072, lng: 16.3712, city: "Wien", cat: "Party", subtag: "bar", title: "Loos Bar", cost: 20, time: "1h", res: "Nein", address: "KÃ¤rntner Durchgang 10, 1010 Wien", desc: "Architektur-Ikone.", img: "loosba.jpg" },
            { id: "w_p5", lat: 48.2065, lng: 16.3546, city: "Wien", cat: "Party", subtag: "bar", title: "Dachboden", cost: 20, time: "2h", res: "Nein", address: "Lerchenfelder Str. 1-3, 1070 Wien", desc: "Rooftop Bar.", img: "dachboden.jpg" },
            { id: "w_p6", lat: 48.2178, lng: 16.3602, city: "Wien", cat: "Party", subtag: "bar", title: "Krypt", cost: 25, time: "2h", res: "Nein", address: "Wasagasse 17, 1090 Wien", desc: "Kellerbar.", img: "krypt.jpg" },
            { id: "w_p7", lat: 48.2011, lng: 16.3695, city: "Wien", cat: "Party", subtag: "club", title: "Sass Music Club", cost: 15, time: "Bis 06:00", res: "Nein", address: "Karlsplatz 1, 1010 Wien", desc: "Elektronisch, intim.", img: "sassmu.jpg" },
            { id: "w_p8", lat: 48.2174, lng: 16.3974, city: "Wien", cat: "Party", subtag: "club", title: "Prater Dome", cost: 15, time: "Bis 05:00", res: "Nein", address: "Riesenradplatz 7, 1020 Wien", desc: "GroÃŸraumdisco.", img: "praterdo.jpg" },
            { id: "w_p9", lat: 48.1875, lng: 16.4051, city: "Wien", cat: "Party", subtag: "club", title: "Louis Tomlinson", cost: 80, time: "Event", res: "Ticket", address: "Karl-Farkas-Gasse 19, 1030 Wien", desc: "Konzert Marx Halle.", img: "" },

            // PRAG - ESSEN
            { id: "p_f1", lat: 50.0834, lng: 14.4287, city: "Prag", cat: "Essen", subtag: "casual", title: "KantÃ½na", cost: 40, time: "1.5h", res: "Nein", address: "PolitickÃ½ch vÄ›zÅˆÅ¯ 1511/5, 110 00 Prag", desc: "Carpaccio-Metzgerei in Bank.", img: "kantna.jpg" },
            { id: "p_f2", lat: 50.0907, lng: 14.4259, city: "Prag", cat: "Essen", subtag: "casual", title: "Lokal DlouhÃ¡Ã¡Ã¡", cost: 25, time: "Open End", res: "Empfohlen", address: "DlouhÃ¡ 33, 110 00 Prag", desc: "Frischestes Pilsner Urquell.", img: "lokaldl.jpg" },
            { id: "p_f3", lat: 50.0801, lng: 14.4286, city: "Prag", cat: "Essen", subtag: "casual", title: "Vytopna Railway", cost: 35, time: "1.5h", res: "Empfohlen", address: "VÃ¡clavskÃ© nÃ¡m. 802/56, 110 00 Prag", desc: "Wenzelsplatz. GetrÃ¤nke kommen mit Modelleisenbahn.", img: "vytopnara.jpg" },
            { id: "p_f4", lat: 50.0913, lng: 14.4544, city: "Prag", cat: "Essen", subtag: "fine", title: "Eska", cost: 40, time: "1.5h", res: "Empfohlen", address: "Pernerova 49, 186 00 Prag", desc: "KarlÃ­n. Michelin Bib Gourmand, BÃ¤ckerei-Restaurant.", img: "eska.jpg" },
            { id: "p_f5", lat: 50.0912, lng: 14.4268, city: "Prag", cat: "Essen", subtag: "street", title: "NaÅ¡e Maso", cost: 25, time: "30min", res: "Nein", address: "DlouhÃ¡ 39, 110 00 Prag", desc: "Mini-Metzgerei. Hackbraten.", img: "naema.jpg" },
            { id: "p_f6", lat: 50.0917, lng: 14.4219, city: "Prag", cat: "Essen", subtag: "fine", title: "Field", cost: 120, time: "3h", res: "Zwingend", address: "U MilosrdnÃ½ch 12, 110 00 Prag", desc: "Michelin Stern.", img: "field.jpg" },
            { id: "p_f7", lat: 50.0693, lng: 14.4036, city: "Prag", cat: "Essen", subtag: "street", title: "Manifesto Market", cost: 30, time: "1h", res: "Nein", address: "OstrovskÃ©ho 34, 150 00 Prag", desc: "Hipster Food Container Market.", img: "manifestoma.jpg" },
            { id: "p_f8", lat: 50.0855, lng: 14.4216, city: "Prag", cat: "Essen", subtag: "street", title: "HavelskÃ¡ Koruna", cost: 10, time: "30min", res: "Nein", address: "HavelskÃ¡ 21, 110 00 Prag", desc: "Tschechische Klassiker, Kantine, billig & schnell.", img: "havelskko.jpg" },
            { id: "p_f9", lat: 50.0904, lng: 14.4260, city: "Prag", cat: "Essen", subtag: "street", title: "Banh Mi Ba", cost: 15, time: "45min", res: "Nein", address: "RybnÃ¡ 26, 110 00 Prag", desc: "Super vietnamesisches Essen (groÃŸe Community in Prag).", img: "banhmi.jpg" },
            { id: "p_f10", lat: 50.0892, lng: 14.3979, city: "Prag", cat: "Essen", subtag: "casual", title: "KuchyÅˆ", cost: 40, time: "1.5h", res: "Empfohlen", address: "HradÄanskÃ© nÃ¡m. 1, 118 00 Prag", desc: "Auf der Burg. Tolle Aussicht, Essen aus TÃ¶pfen.", img: "kuchy.jpg" },
            { id: "p_f11", lat: 50.0874, lng: 14.4060, city: "Prag", cat: "Essen", subtag: "casual", title: "Pork's", cost: 30, time: "1.5h", res: "Empfohlen", address: "MosteckÃ¡ 16, 118 00 Prag", desc: "Haxe.", img: "porks.jpg" },
            { id: "p_f12", lat: 50.0890, lng: 14.4320, city: "Prag", cat: "Essen", subtag: "fine", title: "Sia", cost: 50, time: "2h", res: "Empfohlen", address: "V Celnici 1034/6, 110 00 Prag", desc: "Asiatisch.", img: "sia.jpg" },
            { id: "p_f13", lat: 50.0812, lng: 14.4443, city: "Prag", cat: "Essen", subtag: "casual", title: "The Tavern", cost: 25, time: "1h", res: "Nein", address: "Chopinova 26, 120 00 Prag", desc: "Burger.", img: "theta.jpg" },
            { id: "p_f14", lat: 50.0771, lng: 14.4508, city: "Prag", cat: "Essen", subtag: "casual", title: "Kro Kitchen", cost: 25, time: "1h", res: "Nein", address: "VinohradskÃ¡ 66, 130 00 Prag", desc: "Rotisserie.", img: "kroki.jpg" },
            { id: "p_f15", lat: 50.0887, lng: 14.4274, city: "Prag", cat: "Essen", subtag: "casual", title: "T-Anker", cost: 30, time: "1.5h", res: "Empfohlen", address: "NÃ¡mÄ›stÃ­ Republiky 8, 110 00 Prag", desc: "Dachterrasse.", img: "tanker.jpg" },
            { id: "p_f16", lat: 50.0755, lng: 14.4384, city: "Prag", cat: "Essen", subtag: "casual", title: "VinohradskÃ½ Parlament", cost: 30, time: "1.5h", res: "Empfohlen", address: "KorunnÃ­ 1, 120 00 Prag", desc: "Gute KnÃ¶delgerichte.", img: "vinohradskpa.jpg" },
            { id: "p_f17", lat: 50.0715, lng: 14.4391, city: "Prag", cat: "Essen", subtag: "casual", title: "Las Adelitas", cost: 30, time: "1.5h", res: "Empfohlen", address: "AmerickÃ¡ 8, 120 00 Prag", desc: "Guter Mexikaner.", img: "lasad.jpg" },
            { id: "p_f18", lat: 50.0995, lng: 14.4277, city: "Prag", cat: "Essen", subtag: "street", title: "Mr. HotDog", cost: 20, time: "1h", res: "Nein", address: "KamenickÃ¡ 24, 170 00 Prag", desc: "Hotdogs.", img: "mrho.jpg" },
            { id: "p_f19", lat: 50.0912, lng: 14.4268, city: "Prag", cat: "Essen", subtag: "street", title: "Sisters Bistro", cost: 15, time: "30min", res: "Nein", address: "DlouhÃ¡ 39, 110 00 Prag", desc: "BrÃ¶tchen.", img: "sistersbi.jpg" },
            { id: "p_f20", lat: 50.0801, lng: 14.4287, city: "Prag", cat: "Essen", subtag: "street", title: "Bageterie Boulevard", cost: 10, time: "15min", res: "Nein", address: "VÃ¡clavskÃ© nÃ¡m. 56, 110 00 Prag", desc: "Baguettes.", img: "bageteriebo.jpg" },
            { id: "p_f21", lat: 50.0727, lng: 14.4037, city: "Prag", cat: "Essen", subtag: "street", title: "Burrito Loco", cost: 10, time: "15min", res: "Nein", address: "Å tefÃ¡nikova 230/7, 150 00 Prag", desc: "Burritos.", img: "burritolo.jpg" },
            { id: "p_f22", lat: 50.0858, lng: 14.4200, city: "Prag", cat: "Essen", subtag: "casual", title: "Bistro Monk", cost: 30, time: "1h", res: "Empfohlen", address: "MichalskÃ¡ 20, 110 00 Prag", desc: "FrÃ¼hstÃ¼ck.", img: "bistromo.jpg" },
            { id: "p_f23", lat: 50.0843, lng: 14.4206, city: "Prag", cat: "Essen", subtag: "casual", title: "Venue", cost: 30, time: "1h", res: "Nein", address: "HavelskÃ¡ 4, 110 00 Prag", desc: "Brunch.", img: "venue.jpg" },
            { id: "p_f24", lat: 50.0898, lng: 14.4224, city: "Prag", cat: "Essen", subtag: "street", title: "Bakeshop", cost: 25, time: "30min", res: "Nein", address: "KozÃ­ 1, 110 00 Prag", desc: "BÃ¤ckerei.", img: "bakeshop.jpg" },
            { id: "p_f25", lat: 50.0810, lng: 14.4072, city: "Prag", cat: "Essen", subtag: "fine", title: "CafÃ© Savoy", cost: 40, time: "1.5h", res: "Empfohlen", address: "VÃ­tÄ›znÃ¡ 5, 150 00 Prag", desc: "Imperial.", img: "cafsa.jpg" },
            { id: "p_f26", lat: 50.0794, lng: 14.4189, city: "Prag", cat: "Essen", subtag: "street", title: "Super Tramp Coffee", cost: 10, time: "30min", res: "Nein", address: "OpatovickÃ¡ 160/18, 110 00 Prag", desc: "Kaffee.", img: "supertr.jpg" },
            { id: "p_f27", lat: 50.0753, lng: 14.4513, city: "Prag", cat: "Essen", subtag: "street", title: "Coffee Room", cost: 15, time: "45min", res: "Nein", address: "KorunnÃ­ 74, 101 00 Prag", desc: "Avocado Toast.", img: "coffeero.jpg" },
            { id: "p_f28", lat: 50.0654, lng: 14.4199, city: "Prag", cat: "Essen", subtag: "casual", title: "U Kroka", cost: 25, time: "1.5h", res: "Zwingend", address: "Vratislavova 12/28, 128 00 Prag", desc: "Abseits des Zentrums. Top Preis.", img: "ukr.jpg" },
            { id: "p_f29", lat: 50.0841, lng: 14.4145, city: "Prag", cat: "Essen", subtag: "fine", title: "LehkÃ¡ Hlava", cost: 30, time: "1.5h", res: "Empfohlen", address: "BorÅ¡ov 280/2, 110 00 Prag", desc: "Vegetarisch, spacig.", img: "lehkhl.jpg" },

            // PRAG - AKTIVITÃ„T
            { id: "p_a1", lat: 50.0880, lng: 14.4241, city: "Prag", cat: "AktivitÃ¤t", subtag: "relax", title: "Bier Spa Bernard", cost: 90, time: "1h", res: "Zwingend", address: "TÃ½n 10, 110 00 Prag", desc: "Baden in Bier.", img: "biersp.jpg" },
            { id: "p_a2", lat: 50.0813, lng: 14.4285, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "Nuklearbunker Tour", cost: 25, time: "2h", res: "Ticket", address: "VÃ¡clavskÃ© nÃ¡m. 45 (Hotel Jalta), 110 00 Prag", desc: "Ex-Sowjet Bunker.", img: "nuklearbunkerto.jpg" },
            { id: "p_a3", lat: 50.0789, lng: 14.4132, city: "Prag", cat: "AktivitÃ¤t", subtag: "relax", title: "Tretboot fahren", cost: 20, time: "1h", res: "Nein", address: "SlovanskÃ½ ostrov, 110 00 Prag", desc: "Auf der Moldau (SlovanskÃ½ Insel).", img: "tretbootfa.jpg" },
            { id: "p_a4", lat: 50.0813, lng: 14.4243, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "Museum of Fantastic Illusions", cost: 15, time: "1h", res: "Nein", address: "VodiÄkova 31, 110 00 Prag", desc: "Lustige Fotos.", img: "museumofprag.jpg" },
            { id: "p_a5", lat: 50.0862, lng: 14.4138, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "AltstÃ¤dter BrÃ¼ckenturm", cost: 10, time: "45min", res: "Nein", address: "KarlÅ¯v most, 110 00 Prag", desc: "Aufstieg fÃ¼r den KarlsbrÃ¼cke-Blick.", img: "altstdterbr.jpg" },
            { id: "p_a6", lat: 50.0880, lng: 14.4300, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "Museum des Kommunismus", cost: 15, time: "1.5h", res: "Nein", address: "V Celnici 1031/4, 110 00 Prag", desc: "Geschichte der CSSR.", img: "museumde.jpg" },
            { id: "p_a7", lat: 50.0871, lng: 14.4178, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "Paternoster Aufzug", cost: 0, time: "15min", res: "Nein", address: "MariÃ¡nskÃ© nÃ¡m. 2, 110 00 Prag", desc: "Im Rathaus. Aufzug ohne TÃ¼ren.", img: "paternosterau.jpg" },
            { id: "p_a8", lat: 50.1068, lng: 14.4476, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "DOX Centre for Art", cost: 20, time: "2h", res: "Nein", address: "PoupÄ›tova 1, 170 00 Prag", desc: "HoleÅ¡ovice. Luftschiff auf dem Dach.", img: "doxce.jpg" },
            { id: "p_a9", lat: 50.0787, lng: 14.4028, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "Magical Cavern", cost: 10, time: "45min", res: "Nein", address: "PetÅ™Ã­n, 118 00 Prag", desc: "Psychedelisch.", img: "magicalca.jpg" },
            { id: "p_a10", lat: 50.0874, lng: 14.4174, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "Idiom Installation", cost: 0, time: "15min", res: "Nein", address: "MariÃ¡nskÃ© nÃ¡m. 1, 110 00 Prag", desc: "Unendlicher BÃ¼cherturm in der Bibliothek.", img: "idiomin.jpg" },
            { id: "p_a11", lat: 50.0810, lng: 14.4511, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "Fernsehturm Å½iÅ¾kov", cost: 15, time: "1h", res: "Nein", address: "Mahlerovy sady 1, 130 00 Prag", desc: "Babys.", img: "fernsehturmik.jpg" },
            { id: "p_a12", lat: 50.0981, lng: 14.4142, city: "Prag", cat: "AktivitÃ¤t", subtag: "relax", title: "LetnÃ¡ Park", cost: 0, time: "1h", res: "Nein", address: "LetnÃ¡, 170 00 Prag", desc: "Metronom.", img: "letnpa.jpg" },
            { id: "p_a13", lat: 50.0861, lng: 14.4065, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "John Lennon Wall", cost: 0, time: "30min", res: "Nein", address: "VelkopÅ™evorskÃ© nÃ¡m., 118 00 Prag", desc: "Graffiti.", img: "johnle.jpg" },
            { id: "p_a14", lat: 50.0891, lng: 14.4287, city: "Prag", cat: "AktivitÃ¤t", subtag: "relax", title: "Palladium", cost: 0, time: "1h", res: "Nein", address: "NÃ¡mÄ›stÃ­ Republiky 1, 110 00 Prag", desc: "Shopping.", img: "palladium.jpg" },
            { id: "p_a15", lat: 50.0789, lng: 14.4310, city: "Prag", cat: "AktivitÃ¤t", subtag: "culture", title: "Nationalmuseum", cost: 20, time: "2h", res: "Nein", address: "VÃ¡clavskÃ© nÃ¡m. 68, 110 00 Prag", desc: "Prunkbau.", img: "nationalmuseum.jpg" },
            { id: "p_a16", lat: 50.0526, lng: 14.4146, city: "Prag", cat: "AktivitÃ¤t", subtag: "relax", title: "Sauna Spot Dvorce", cost: 35, time: "2h", res: "Empfohlen", address: "PodolskÃ© nÃ¡bÅ™. 1184/5, 147 00 Prag", desc: "Sauna an der Moldau.", img: "saunasp.jpg" },
            { id: "p_a17", lat: 49.2434, lng: 16.5155, city: "Prag", cat: "AktivitÃ¤t", subtag: "relax", title: "Infinit Maximus", cost: 50, time: "4h", res: "Empfohlen", address: "HrÃ¡znÃ­ 327/4a, 635 00 Brno", desc: "Riesige Saunawelt.", img: "infinitma.jpg" },

            // PRAG - PARTY
            { id: "p_p1", lat: 50.1082, lng: 14.4432, city: "Prag", cat: "Party", subtag: "club", title: "Cross Club", cost: 15, time: "Bis 06:00", res: "Nein", address: "PlynÃ¡rnÃ­ 1096/23, 170 00 Prag", desc: "Steampunk D&B.", img: "crosscl.jpg" },
            { id: "p_p2", lat: 50.0840, lng: 14.4143, city: "Prag", cat: "Party", subtag: "bar", title: "Hemingway Bar", cost: 40, time: "2h", res: "Zwingend", address: "KarolÃ­ny SvÄ›tlÃ© 26, 110 00 Prag", desc: "Absinth-Cocktails.", img: "hemingwayba.jpg" },
            { id: "p_p3", lat: 50.0852, lng: 14.4200, city: "Prag", cat: "Party", subtag: "bar", title: "Anonymous Bar", cost: 30, time: "2h", res: "Empfohlen", address: "MichalskÃ¡ 12, 110 00 Prag", desc: "Hidden Bar.", img: "anonymousba.jpg" },
            { id: "p_p4", lat: 50.0790, lng: 14.4222, city: "Prag", cat: "Party", subtag: "bar", title: "U Sudu", cost: 10, time: "Open End", res: "Nein", address: "VodiÄkova 677/10, 110 00 Prag", desc: "HÃ¶hlenbar.", img: "usu.jpg" },
            { id: "p_p5", lat: 50.0768, lng: 14.4082, city: "Prag", cat: "Party", subtag: "bar", title: "Jazz Dock", cost: 25, time: "2h", res: "Ticket", address: "JanÃ¡Äkovo nÃ¡bÅ™. 3249/2, 150 00 Prag", desc: "Am Wasser.", img: "jazzdo.jpg" },
            { id: "p_p6", lat: 50.0864, lng: 14.4202, city: "Prag", cat: "Party", subtag: "club", title: "Black Angel's", cost: 40, time: "2h", res: "Nein", address: "StaromÄ›stskÃ© nÃ¡m. 29, 110 00 Prag", desc: "Gothic.", img: "blackan.jpg" },
            { id: "p_p7", lat: 50.0854, lng: 14.4139, city: "Prag", cat: "Party", subtag: "club", title: "Karlovy Lazne", cost: 25, time: "Bis 05:00", res: "Nein", address: "NovotnÃ©ho lÃ¡vka 198/5, 110 00 Prag", desc: "5-Stock.", img: "karlovyla.jpg" },
            { id: "p_p8", lat: 50.0625, lng: 14.4297, city: "Prag", cat: "Party", subtag: "club", title: "Paul Simon Konzert", cost: 90, time: "Event", res: "Ticket", address: "Kongresszentrum, Prag", desc: "Konzert.", img: "" }, 
            { id: "p_p9", lat: 50.0898, lng: 14.4278, city: "Prag", cat: "Party", subtag: "club", title: "Epic Prague", cost: 25, time: "Bis 05:00", res: "Ticket", address: "RevoluÄnÃ­ 1003/3, 110 00 Prag", desc: "EDM.", img: "epicpr.jpg" }
        ];

        // --- COMPONENTS ---

        const Icon = ({ name, className }) => {
            React.useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        const Toast = ({ message, isVisible, onClose }) => {
            useEffect(() => {
                if (isVisible) {
                    const timer = setTimeout(onClose, 3000);
                    return () => clearTimeout(timer);
                }
            }, [isVisible, onClose]);

            if (!isVisible) return null;

            return (
                <div className="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white px-6 py-3 rounded-full shadow-xl z-[9999] text-sm font-bold flex items-center gap-2 toast-enter">
                    <span>{message}</span>
                </div>
            );
        };

        // --- TIKTOK ICON ---
        const TikTokIcon = () => (
            <svg viewBox="0 0 24 24" fill="currentColor" className="w-3 h-3">
                <path d="M12.525.02c1.31-.02 2.61-.01 3.918.02.08 1.84 1.256 3.24 3.42 3.74V7.9c-1.63-.02-2.924-.6-3.879-1.92V12.9c0 3.32-3.11 5.76-6.618 4.69C7.38 17 6.13 14.88 7.5 12.3c.75-1.42 2.13-2.22 3.82-2.06V7c-3.14-.35-6.66 2.36-6.62 6.58.04 4.34 4.29 7.37 8.28 6.44 3.2-.74 5.38-3.9 5.25-7.74V4.68c2.16.03 4.14 1.3 5.09 3.5v-4.8c-.85-.18-1.7-.28-2.56-.28-1.5 0-2.88.58-4.04 1.58V0h-3.918z"/>
            </svg>
        );

        // --- GOOGLE ICON ---
        const GoogleIcon = () => (
            <svg viewBox="0 0 24 24" className="w-3 h-3">
                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z" fill="#FBBC05"/>
                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
            </svg>
        );

        // --- MAP COMPONENT (New) ---
        const MapView = ({ items, activeCity }) => {
            const mapRef = useRef(null);
            const markersRef = useRef(L.featureGroup());

            // Coordinates for cities to fly to
            const CITY_COORDS = {
                "Budapest": [47.4979, 19.0402],
                "Wien": [48.2082, 16.3738],
                "Prag": [50.0755, 14.4378],
                "Transfer": [48.2082, 16.3738] // Default center
            };

            const getEmoji = (cat) => {
                switch(cat) {
                    case 'Essen': return 'ðŸ”';
                    case 'AktivitÃ¤t': return 'ðŸ°';
                    case 'Party': return 'ðŸ¸';
                    case 'Transport': return 'ðŸš†';
                    default: return 'ðŸ“';
                }
            };

            useEffect(() => {
                // Initialize Map if not already done
                if (!mapRef.current) {
                    const map = L.map('map-container', { zoomControl: false }).setView(CITY_COORDS["Budapest"], 13);
                    
                    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                        attribution: '&copy; OpenStreetMap',
                        subdomains: 'abcd',
                        maxZoom: 20
                    }).addTo(map);
                    
                    L.control.zoom({ position: 'bottomright' }).addTo(map);
                    mapRef.current = map;
                }
                
                const map = mapRef.current;
                
                // Fly to city center
                if (CITY_COORDS[activeCity]) {
                    map.flyTo(CITY_COORDS[activeCity], 13, { duration: 1.5 });
                }

                const markersLayer = markersRef.current;
                markersLayer.clearLayers();

                // Add markers
                items.forEach(item => {
                    if (item.lat && item.lng && item.lat !== 0) {
                        const iconHtml = `<div class="emoji-marker">${getEmoji(item.cat)}</div>`;
                        const customIcon = L.divIcon({
                            html: iconHtml,
                            className: 'bg-transparent',
                            iconSize: [30, 30],
                            iconAnchor: [15, 15],
                            popupAnchor: [0, -10]
                        });

                        const marker = L.marker([item.lat, item.lng], { icon: customIcon });
                        
                        // Popup HTML
                        const popupContent = `
                            <div style="border-radius: 12px; overflow: hidden;">
                                <div style="height: 100px; background-image: url('${item.img || ''}'); background-size: cover; background-position: center; position: relative;">
                                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); padding: 8px;">
                                        <div style="color: white; font-weight: bold; font-family: 'Quicksand';">${item.title}</div>
                                    </div>
                                </div>
                                <div class="popup-content">
                                    <div style="font-size: 10px; color: #888; text-transform: uppercase; font-weight: bold;">${item.cat}</div>
                                    <div style="font-size: 12px; color: #444; margin: 4px 0;">${item.desc}</div>
                                    <a href="https://maps.google.com/?q=${item.lat},${item.lng}" target="_blank" style="display: block; margin-top: 8px; text-align: center; background: #e11d48; color: white; padding: 4px; border-radius: 6px; text-decoration: none; font-size: 11px; font-weight: bold;">ðŸ“ Google Maps</a>
                                </div>
                            </div>
                        `;
                        
                        marker.bindPopup(popupContent);
                        marker.bindTooltip(item.title, { direction: 'top', offset: [0, -20], opacity: 0.9 }); // Hover tooltip
                        markersLayer.addLayer(marker);
                    }
                });

                markersLayer.addTo(map);

            }, [items, activeCity]); // Re-run when items or city changes

            // Force map resize on mount (fixes mobile/tab glitches)
            useEffect(() => {
                setTimeout(() => {
                    if (mapRef.current) mapRef.current.invalidateSize();
                }, 200);
            }, []);

            return <div id="map-container"></div>;
        };

        const TripTimeline = () => {
            const [progress, setProgress] = useState(0);
            const [currentSegment, setCurrentSegment] = useState(0);

            useEffect(() => {
                const now = new Date();
                
                const start = new Date('2026-04-01T00:00:00');
                const end = new Date('2026-04-10T23:59:59');
                const totalDuration = end - start;

                if (now < start) {
                    setProgress(0);
                    setCurrentSegment(0);
                } else if (now > end) {
                    setProgress(100);
                    setCurrentSegment(4);
                } else {
                    const elapsed = now - start;
                    const p = (elapsed / totalDuration) * 100;
                    setProgress(p);

                    const day = now.getDate();
                    if (day < 4) setCurrentSegment(1); 
                    else if (day < 7) setCurrentSegment(2); 
                    else setCurrentSegment(3); 
                }
            }, []);

            const getSegmentColor = (index) => {
                if (index === 1) return "bg-rose-400";
                if (index === 2) return "bg-amber-400";
                return "bg-emerald-400";
            };

            const getFillWidth = (start, end) => {
                if (progress < start) return 0;
                if (progress > end) return 100;
                return ((progress - start) / (end - start)) * 100;
            };

            return (
                <div className="w-full bg-white/50 border-b border-rose-100 p-4 sticky top-[72px] z-30 shadow-sm backdrop-blur-md hidden md:block">
                    <div className="max-w-4xl mx-auto relative pt-6 pb-2">
                        <div className="absolute top-0 left-0 w-full h-2 bg-slate-200 rounded-full overflow-hidden flex">
                            <div className="w-1/3 h-full relative border-r border-white/50">
                                <div className={`h-full ${getSegmentColor(1)}`} style={{width: `${getFillWidth(0, 33.3)}%`}}></div>
                            </div>
                            <div className="w-1/3 h-full relative border-r border-white/50">
                                <div className={`h-full ${getSegmentColor(2)}`} style={{width: `${getFillWidth(33.3, 66.6)}%`}}></div>
                            </div>
                            <div className="w-1/3 h-full relative">
                                <div className={`h-full ${getSegmentColor(3)}`} style={{width: `${getFillWidth(66.6, 100)}%`}}></div>
                            </div>
                        </div>

                        <div 
                            className="absolute top-[-14px] text-2xl transition-all duration-1000 ease-linear beer-cursor z-10" 
                            style={{ left: `calc(${progress}% - 12px)` }}
                        >
                            ðŸº
                        </div>

                        <div className="flex justify-between text-[10px] font-bold text-slate-400 mt-1 uppercase tracking-wide relative">
                            <div className="flex flex-col items-center absolute left-0 -ml-4">
                                <span className="text-lg">ðŸ›¬</span>
                                <span>Mi 01.04.</span>
                            </div>
                            <div className="absolute left-[16.5%] -ml-2 text-lg opacity-50">ðŸ‡­ðŸ‡º</div>
                            <div className="flex flex-col items-center absolute left-[33.3%] -ml-4">
                                <span className="text-lg">ðŸš‚</span>
                                <span>Sa 04.04.</span>
                            </div>
                            <div className="absolute left-[50%] -ml-2 text-lg opacity-50">ðŸ‡¦ðŸ‡¹</div>
                            <div className="flex flex-col items-center absolute left-[66.6%] -ml-4">
                                <span className="text-lg">ðŸš‚</span>
                                <span>Di 07.04.</span>
                            </div>
                            <div className="absolute left-[83.5%] -ml-2 text-lg opacity-50">ðŸ‡¨ðŸ‡¿</div>
                            <div className="flex flex-col items-center absolute right-0 -mr-4">
                                <span className="text-lg">ðŸ</span>
                                <span>Fr 10.04.</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const CurrencyConverter = () => {
            const [amount, setAmount] = useState('');
            const [currency, setCurrency] = useState('CHF');
            
            const handleConvert = (targetCurr) => {
                if (!amount) return '---';
                const val = parseFloat(amount);
                if (isNaN(val)) return '---';
                
                let inCHF = val;
                if (currency !== 'CHF') {
                    inCHF = val / FX_RATES[currency];
                }
                
                if (targetCurr === 'CHF') return inCHF.toFixed(2);
                
                return Math.round(inCHF * FX_RATES[targetCurr]).toLocaleString();
            };

            return (
                <div className="flex flex-col sm:flex-row items-center gap-3 bg-white/80 backdrop-blur-md p-3 rounded-2xl border border-rose-100 shadow-sm text-xs font-medium w-full sm:w-auto">
                    <div className="flex items-center gap-2 bg-slate-50 px-3 py-1.5 rounded-xl border border-slate-200 w-full sm:w-auto">
                        <input 
                            type="number" 
                            placeholder="100" 
                            className="w-16 bg-transparent outline-none font-mono font-bold text-slate-700"
                            value={amount}
                            onChange={(e) => setAmount(e.target.value)}
                        />
                        <select 
                            value={currency} 
                            onChange={(e) => setCurrency(e.target.value)}
                            className="bg-transparent outline-none text-slate-500 font-bold cursor-pointer"
                        >
                            <option value="CHF">CHF</option>
                            <option value="HUF">HUF</option>
                            <option value="EUR">EUR</option>
                            <option value="CZK">CZK</option>
                        </select>
                    </div>
                    
                    <div className="flex gap-4 w-full justify-between sm:justify-start px-2">
                        {currency !== 'CHF' && (
                            <div className="flex flex-col items-center">
                                <span className="text-[9px] text-slate-400 font-bold uppercase">CHF</span>
                                <span className="font-mono text-slate-700">{handleConvert('CHF')}</span>
                            </div>
                        )}
                        {currency !== 'HUF' && (
                            <div className="flex flex-col items-center">
                                <span className="text-[9px] text-rose-400 font-bold uppercase">HUF</span>
                                <span className="font-mono text-slate-700">{handleConvert('HUF')}</span>
                            </div>
                        )}
                        {currency !== 'EUR' && (
                            <div className="flex flex-col items-center">
                                <span className="text-[9px] text-amber-500 font-bold uppercase">EUR</span>
                                <span className="font-mono text-slate-700">{handleConvert('EUR')}</span>
                            </div>
                        )}
                        {currency !== 'CZK' && (
                            <div className="flex flex-col items-center">
                                <span className="text-[9px] text-emerald-500 font-bold uppercase">CZK</span>
                                <span className="font-mono text-slate-700">{handleConvert('CZK')}</span>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const StaticAlternativesModal = ({ isOpen, onClose, currentItem }) => {
            const [alternatives, setAlternatives] = useState([]);

            useEffect(() => {
                if (isOpen && currentItem) {
                    let matches = DB.filter(i => 
                        i.city === currentItem.city && 
                        i.cat === currentItem.cat && 
                        i.id !== currentItem.id
                    );

                    matches.sort((a, b) => {
                        const aMatch = a.subtag === currentItem.subtag ? 1 : 0;
                        const bMatch = b.subtag === currentItem.subtag ? 1 : 0;
                        return bMatch - aMatch;
                    });

                    // Fallback to City Only if no category match
                    if (matches.length === 0) {
                        matches = DB.filter(i => i.city === currentItem.city && i.id !== currentItem.id);
                    }

                    setAlternatives(matches.slice(0, 4));
                }
            }, [isOpen, currentItem]);

            const openWebSearch = () => {
                const query = encodeURIComponent(`${currentItem.title} ${currentItem.city} alternative similar`);
                window.open(`https://www.google.com/search?q=${query}`, '_blank');
            };

            if (!isOpen || !currentItem) return null;

            return (
                <div className="fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm modal-enter" onClick={onClose}>
                    <div className="bg-white rounded-3xl w-full max-w-xl max-h-[85vh] overflow-hidden shadow-2xl relative flex flex-col" onClick={e => e.stopPropagation()}>
                        
                        <div className="p-5 border-b border-rose-100 flex justify-between items-center bg-rose-50/50">
                            <h2 className="text-lg font-bold text-rose-900">Alternativen zu "{currentItem.title}"</h2>
                            <button onClick={onClose} className="p-2 hover:bg-rose-100 rounded-full transition-colors"><Icon name="x" className="w-5 h-5 text-rose-400"/></button>
                        </div>

                        <div className="p-6 overflow-y-auto flex-1 custom-scroll bg-white">
                            <div className="space-y-3">
                                {alternatives.length > 0 ? alternatives.map(alt => (
                                    <div key={alt.id} className="border border-rose-100 rounded-2xl p-4 hover:border-rose-300 hover:shadow-md transition-all bg-white">
                                        <div className="flex justify-between items-start mb-1">
                                            <h4 className="font-bold text-slate-800">{alt.title}</h4>
                                            <span className="text-xs font-mono font-bold text-rose-600 bg-rose-50 px-2 py-1 rounded-lg">{alt.cost}.-</span>
                                        </div>
                                        <p className="text-xs text-slate-500 mb-2 line-clamp-2">{alt.desc}</p>
                                        <div className="flex gap-3 text-[10px] text-slate-400 font-bold uppercase tracking-wide">
                                            <span className="flex items-center gap-1"><Icon name="clock" className="w-3 h-3"/> {alt.time}</span>
                                            <span className="text-amber-600">{alt.res}</span>
                                        </div>
                                    </div>
                                )) : (
                                    <div className="text-center py-10 text-slate-400">Keine direkten Matches.</div>
                                )}
                            </div>
                        </div>

                        <div className="p-5 border-t border-rose-100 bg-slate-50">
                            <button 
                                onClick={openWebSearch}
                                className="w-full py-3 bg-white text-rose-600 text-sm font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-rose-50 transition-colors border-2 border-rose-100 shadow-sm"
                            >
                                <Icon name="search" className="w-4 h-4"/> 
                                Google nach Weiterem fragen
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        const TripCalendar = () => {
            const initialDays = Array.from({ length: 10 }, (_, i) => {
                const date = new Date(2026, 3, 1 + i); 
                const dayStr = date.toLocaleDateString('de-DE', { weekday: 'short', day: '2-digit', month: '2-digit' });
                let city = "Budapest ðŸ‡­ðŸ‡º";
                let defaultSlots = { mor: "", aft: "", eve: "", nht: "" };

                if (i === 0) { // 01.04
                    defaultSlots.eve = "ðŸ›¬ Landung 20:10 (EZS1213)";
                    defaultSlots.nht = "Check-in (ab 15:00)";
                } else if (i === 3) { // 04.04
                    city = "Budapest âž¡ï¸ Wien";
                    defaultSlots.mor = "Checkout BUD (bis 10:00)";
                    defaultSlots.aft = "Zug nach Wien";
                    defaultSlots.eve = "Check-in VIE (ab 15:00)";
                } else if (i > 3 && i < 6) {
                    city = "Wien ðŸ‡¦ðŸ‡¹";
                } else if (i === 6) { // 07.04
                    city = "Wien âž¡ï¸ Prag";
                    defaultSlots.mor = "Checkout VIE (bis 12:00)";
                    defaultSlots.aft = "Zug nach Prag";
                    defaultSlots.eve = "Check-in PRG (~15:00)";
                } else if (i > 6) {
                    city = "Prag ðŸ‡¨ðŸ‡¿";
                    if (i === 9) { // 10.04
                        defaultSlots.eve = "ðŸ›« Abflug 19:00 (EJU7572)";
                    }
                }

                return { id: i, date: dayStr, city, slots: defaultSlots };
            });

            const [days, setDays] = useState(() => {
                const saved = localStorage.getItem('trip_calendar_v2'); 
                return saved ? JSON.parse(saved) : initialDays;
            });

            useEffect(() => {
                localStorage.setItem('trip_calendar_v2', JSON.stringify(days));
            }, [days]);

            const updateSlot = (dayId, slot, value) => {
                setDays(prev => prev.map(d => d.id === dayId ? { ...d, slots: { ...d.slots, [slot]: value } } : d));
            };

            const resetCalendar = () => {
                if(confirm("Kalender zurÃ¼cksetzen? Alle eigenen EintrÃ¤ge gehen verloren.")) {
                    setDays(initialDays);
                }
            };

            return (
                <div className="p-4 pb-20 fade-in">
                    <div className="flex justify-center items-center mb-6 gap-4">
                         <h2 className="text-xl font-bold text-rose-900">Dein Reiseplan ðŸ“…</h2>
                         <button onClick={resetCalendar} className="text-[10px] text-slate-400 underline">Reset</button>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                        {days.map(day => (
                            <div key={day.id} className="bg-white rounded-xl shadow-sm border border-rose-100 overflow-hidden flex flex-col">
                                <div className="bg-rose-50 p-2 text-center border-b border-rose-100">
                                    <div className="font-bold text-rose-800">{day.date}</div>
                                    <div className="text-[10px] text-slate-500 uppercase tracking-wide">{day.city}</div>
                                </div>
                                <div className="p-2 space-y-2 flex-1">
                                    <textarea 
                                        placeholder="Morgen..." 
                                        className="w-full text-xs p-2 bg-slate-50 rounded border border-slate-100 resize-none h-16 focus:border-rose-300 outline-none"
                                        value={day.slots.mor}
                                        onChange={(e) => updateSlot(day.id, 'mor', e.target.value)}
                                    />
                                    <textarea 
                                        placeholder="Nachmittag..." 
                                        className="w-full text-xs p-2 bg-slate-50 rounded border border-slate-100 resize-none h-16 focus:border-rose-300 outline-none"
                                        value={day.slots.aft}
                                        onChange={(e) => updateSlot(day.id, 'aft', e.target.value)}
                                    />
                                    <textarea 
                                        placeholder="Abend..." 
                                        className="w-full text-xs p-2 bg-slate-50 rounded border border-slate-100 resize-none h-16 focus:border-rose-300 outline-none"
                                        value={day.slots.eve}
                                        onChange={(e) => updateSlot(day.id, 'eve', e.target.value)}
                                    />
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const Card = ({ item, onShowAlternatives, toggleFav, isFav, onToast }) => {
            const [showLocal, setShowLocal] = useState(false);
            const [imgError, setImgError] = useState(false);

            const imagePath = `${item.img}`;

            const openSearch = (platform) => {
                const query = item.cat === "Transport" && item.city === "Transfer" 
                    ? item.desc.split('.')[0] 
                    : `${item.title} ${item.city}`;
                
                const encodedQuery = encodeURIComponent(query);

                if (platform === 'google') {
                    window.open(`https://www.google.com/search?q=${encodedQuery}`, '_blank');
                } else if (platform === 'tiktok') {
                    // Check if mobile
                    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                    
                    if (isMobile) {
                        navigator.clipboard.writeText(query).then(() => {
                            onToast(`Kopiert: "${query}" âœ… - Jetzt in TikTok einfÃ¼gen!`);
                        });
                    } else {
                        // Desktop
                        window.open(`https://www.tiktok.com/search?q=${encodedQuery}`, '_blank');
                    }
                }
            };

            const openMaps = () => {
                const query = encodeURIComponent(item.address || `${item.title}, ${item.city}`);
                window.open(`https://maps.google.com/?q=${query}`, '_blank');
            };

            const getResBadge = (res) => {
                if(res.includes("Zwingend")) return "badge-res-high";
                if(res.includes("Empfohlen")) return "badge-res-med";
                return "badge-res-low";
            };

            const getLocalPrice = () => {
                let currency = 'CHF';
                let rate = 1;
                if (item.city === "Budapest") { currency = 'HUF'; rate = FX_RATES.HUF; }
                else if (item.city === "Wien") { currency = 'â‚¬'; rate = FX_RATES.EUR; }
                else if (item.city === "Prag") { currency = 'KÄ'; rate = FX_RATES.CZK; }
                
                const val = (item.cost * rate).toLocaleString(undefined, {maximumFractionDigits: 0});
                return `${val} ${currency}`;
            };

            let themeClass = "border-slate-200";
            let btnClass = "bg-slate-900 hover:bg-slate-800";
            if (item.city === "Budapest") { themeClass = "border-rose-200"; btnClass = "bg-rose-600 hover:bg-rose-700"; }
            if (item.city === "Wien") { themeClass = "border-amber-200"; btnClass = "bg-amber-600 hover:bg-amber-700"; }
            if (item.city === "Prag") { themeClass = "border-emerald-200"; btnClass = "bg-emerald-600 hover:bg-emerald-700"; }
            if (item.city === "Transfer") { themeClass = "border-indigo-200"; btnClass = "bg-indigo-600 hover:bg-indigo-700"; }

            return (
                <div className={`bg-white rounded-2xl shadow-sm border ${themeClass} overflow-hidden card-hover flex flex-col h-full fade-in relative group`}>
                    
                    {/* Header Image Area */}
                    <div className="h-44 relative bg-slate-100 overflow-hidden">
                        {!imgError && item.img ? (
                            <img src={imagePath} alt={item.title} className="w-full h-full object-cover transition-opacity duration-300" onError={() => setImgError(true)} />
                        ) : (
                            <div className="img-fallback" style={{display: 'flex', backgroundColor: '#e2e8f0', alignItems: 'center', justifyContent: 'center', color: '#94a3b8', fontWeight: 700, fontSize: '1.5rem', width: '100%', height: '100%'}}>
                                {item.title.substring(0, 2).toUpperCase()}
                            </div>
                        )}
                        <div className="absolute top-2 right-2 flex gap-1">
                            <span className="bg-white/90 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider text-slate-900 shadow-sm backdrop-blur-sm">{item.cat}</span>
                        </div>
                        <button 
                            onClick={(e) => { e.stopPropagation(); toggleFav(item.id); }}
                            className="absolute top-2 left-2 p-2 bg-white/80 backdrop-blur rounded-full shadow-md hover:scale-110 transition-transform cursor-pointer z-20"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill={isFav ? "#f43f5e" : "none"} stroke={isFav ? "#f43f5e" : "#94a3b8"} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" 
                                className={`w-5 h-5 transition-all ${isFav ? 'heart-active' : ''}`}>
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />
                            </svg>
                        </button>
                    </div>

                    <div className="p-4 flex-1 flex flex-col">
                        <div className="flex justify-between items-start mb-2">
                            <h3 className="font-bold text-slate-900 text-lg leading-tight">{item.title}</h3>
                            <div 
                                className="text-right shrink-0 ml-2 cursor-pointer select-none" 
                                onClick={() => setShowLocal(!showLocal)}
                                title="Klick zum WÃ¤hrung wechseln"
                            >
                                <div className="font-mono font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-lg text-sm transition-colors hover:bg-indigo-100">
                                    {showLocal ? getLocalPrice() : `${item.cost}.-`}
                                </div>
                            </div>
                        </div>

                        <p className="text-xs text-slate-500 mb-5 leading-relaxed flex-1">{item.desc}</p>

                        <div className="grid grid-cols-5 gap-2 mb-4">
                            <button onClick={() => openSearch('google')} className="col-span-2 py-2 bg-slate-50 text-slate-600 text-[10px] font-bold rounded-xl flex items-center justify-center gap-1 hover:bg-slate-100 transition-colors border border-slate-100">
                                <GoogleIcon /> Google
                            </button>
                            {item.cat !== 'Transport' && (
                                <button onClick={() => openSearch('tiktok')} className="col-span-2 py-2 bg-white text-black text-[10px] font-bold rounded-xl flex items-center justify-center gap-1 hover:bg-slate-50 transition-colors border border-slate-200">
                                    <TikTokIcon /> TikTok
                                </button>
                            )}
                             <button onClick={openMaps} className="col-span-1 py-2 bg-slate-50 text-slate-600 rounded-xl flex items-center justify-center hover:bg-slate-100 transition-colors border border-slate-100" title="Karte">
                                <Icon name="map-pin" className="w-4 h-4"/>
                            </button>
                        </div>

                        <div className="border-t border-slate-50 pt-3 mt-auto space-y-3">
                            <div className="flex justify-between text-xs font-bold text-slate-400 uppercase tracking-wide">
                                <span className="flex items-center gap-1"><Icon name="clock" className="w-3 h-3"/> {item.time}</span>
                                <span className={`px-2 py-0.5 rounded ${getResBadge(item.res)}`}>Res: {item.res}</span>
                            </div>
                            
                            {item.cat !== 'Transport' && (
                                <button 
                                    onClick={() => onShowAlternatives(item)}
                                    className={`w-full py-2.5 text-white text-xs font-bold rounded-lg flex items-center justify-center gap-2 transition-all shadow-md ${btnClass}`}
                                >
                                    <Icon name="sparkles" className="w-3 h-3 text-white/70"/> 
                                    Alternativen
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [view, setView] = useState('hub');
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [cityFilter, setCityFilter] = useState("Budapest");
            const [catFilter, setCatFilter] = useState("Alle");
            const [modalOpen, setModalOpen] = useState(false);
            const [modalItem, setModalItem] = useState(null);
            
            const [toastMsg, setToastMsg] = useState("");
            const [showToast, setShowToast] = useState(false);

            const triggerToast = (msg) => {
                setToastMsg(msg);
                setShowToast(true);
            };
            
            const [favs, setFavs] = useState(() => {
                try {
                    const saved = localStorage.getItem('trip_favs');
                    return saved ? JSON.parse(saved) : [];
                } catch (e) { return []; }
            });

            useEffect(() => {
                localStorage.setItem('trip_favs', JSON.stringify(favs));
            }, [favs]);

            const toggleFav = (id) => {
                setFavs(prev => prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id]);
            };

            const filteredDB = useMemo(() => {
                if (cityFilter === 'Favs') {
                    return DB.filter(item => favs.includes(item.id));
                }
                return DB.filter(item => {
                    if (cityFilter !== item.city) return false;
                    if (catFilter === "Alle") return true;
                    return item.cat === catFilter;
                });
            }, [cityFilter, catFilter, favs]);

            const handleShowAlternatives = (item) => {
                setModalItem(item);
                setModalOpen(true);
            };

            const toggleMenu = () => setIsMenuOpen(!isMenuOpen);

            // Trip Progress Logic
            const [progress, setProgress] = useState(0);
            const [daysLeft, setDaysLeft] = useState(0);
            const [tripActive, setTripActive] = useState(false);

            useEffect(() => {
                const start = new Date('2026-04-01T00:00:00').getTime();
                const end = new Date('2026-04-10T23:59:59').getTime();
                const now = new Date().getTime(); 
                
                const diffTime = start - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
                setDaysLeft(diffDays);

                if (now < start) {
                    setProgress(0);
                    setTripActive(false);
                } else if (now > end) {
                    setProgress(100);
                    setTripActive(false);
                } else {
                    setTripActive(true);
                    const totalDuration = end - start;
                    const elapsed = now - start;
                    setProgress((elapsed / totalDuration) * 100);
                }
            }, []);

            const cities = ["Budapest", "Transfer", "Wien", "Prag"];

            return (
                <div className="min-h-screen max-w-7xl mx-auto pb-20">
                    <header className="bg-white/80 backdrop-blur-md p-4 sticky top-0 z-50 border-b border-rose-100 shadow-sm mb-6 rounded-b-[30px]">
                        <div className="flex flex-col gap-4 max-w-7xl mx-auto">
                            <div className="flex flex-row justify-between items-center gap-4">
                                <div>
                                    <h1 className="text-xl font-bold tracking-tighter text-rose-900 flex items-center gap-2">
                                        Bingus & Amor <span className="bg-rose-100 text-rose-600 text-[10px] px-2 py-0.5 rounded-full uppercase tracking-widest">Trip 2026</span>
                                    </h1>
                                    <p className="text-xs text-rose-400 mt-1 font-bold md:block hidden">
                                        {tripActive ? "Der Trip lÃ¤uft! ðŸŒ Viel SpaÃŸ!" : (daysLeft > 0 ? `â³ Noch ${daysLeft} Tage bis zum Abflug! âœˆï¸` : "Trip vorbei ðŸ‘‹")}
                                    </p>
                                </div>
                                
                                <div className="hidden md:block">
                                   <CurrencyConverter />
                                </div>
                                
                                <button className="md:hidden p-2" onClick={toggleMenu}>
                                    <Icon name={isMenuOpen ? "x" : "menu"} className="w-6 h-6 text-slate-700"/>
                                </button>
                            </div>
                        </div>

                        {/* Desktop Timeline - Visible on MD+ */}
                         <div className="hidden md:block w-full">
                            <TripTimeline />
                         </div>

                         {/* Desktop Navigation & Filters */}
                         <div className="hidden md:flex gap-4 items-center">
                             <div className="flex gap-2">
                                <button onClick={() => setView('hub')} className={`px-4 py-2 rounded-lg font-bold text-sm ${view === 'hub' ? 'bg-rose-50 text-rose-700' : 'text-slate-500 hover:bg-slate-50'}`}>Hub</button>
                                <button onClick={() => setView('calendar')} className={`px-4 py-2 rounded-lg font-bold text-sm ${view === 'calendar' ? 'bg-rose-50 text-rose-700' : 'text-slate-500 hover:bg-slate-50'}`}>Kalender</button>
                                <button onClick={() => setView('map')} className={`px-4 py-2 rounded-lg font-bold text-sm ${view === 'map' ? 'bg-rose-50 text-rose-700' : 'text-slate-500 hover:bg-slate-50'}`}>Karte ðŸ—ºï¸</button>
                             </div>
                             <div className="h-6 w-px bg-slate-200"></div>
                             
                             {(view === 'hub' || view === 'map') && (
                                 <div className="flex gap-2 items-center w-full">
                                     <button onClick={() => { setCityFilter("Favs"); setCatFilter("Alle"); }} className={`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${cityFilter === "Favs" ? 'bg-rose-500 text-white' : 'text-slate-500 hover:bg-slate-50'}`}>â¤ï¸ Favs</button>
                                     <div className="h-4 w-px bg-slate-200"></div>
                                     {cities.map(c => (
                                         <button key={c} onClick={() => { setCityFilter(c); setCatFilter("Alle"); }} className={`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${cityFilter === c ? 'bg-slate-800 text-white' : 'text-slate-500 hover:bg-slate-50'}`}>
                                             {c === "Transfer" ? "ðŸš„" : c.substring(0,3).toUpperCase()}
                                         </button>
                                     ))}
                                     
                                     {/* Category Filter */}
                                     {cityFilter !== "Transfer" && cityFilter !== "Favs" && (
                                         <div className="flex gap-2 ml-auto">
                                             {["Alle", "Essen", "AktivitÃ¤t", "Party"].map(cat => (
                                                 <button key={cat} onClick={() => setCatFilter(cat)} className={`px-3 py-1 rounded-full text-[10px] font-bold border ${catFilter === cat ? 'bg-rose-100 border-rose-300 text-rose-700' : 'bg-white border-slate-200 text-slate-500 hover:border-slate-300'}`}>{cat}</button>
                                             ))}
                                         </div>
                                     )}
                                 </div>
                             )}
                         </div>
                    </header>
                    
                    {/* Mobile Menu */}
                    <div className={`overflow-hidden transition-all duration-300 md:hidden ${isMenuOpen ? 'max-h-[600px] border-t border-slate-100 mt-4 pt-4 px-4 bg-white/95 backdrop-blur-lg fixed left-0 right-0 z-40 shadow-lg top-[70px]' : 'max-h-0'}`}>
                        <div className="space-y-4 pb-4">
                            <p className="text-xs text-rose-400 font-bold text-center">
                                {tripActive ? "Der Trip lÃ¤uft! ðŸŒ" : (daysLeft > 0 ? `â³ Noch ${daysLeft} Tage!` : "Trip vorbei ðŸ‘‹")}
                            </p>
                            <CurrencyConverter />
                            <div className="flex justify-center gap-2">
                                <button onClick={() => { setView('hub'); setIsMenuOpen(false); }} className={`flex-1 py-2 rounded-lg text-sm font-bold ${view === 'hub' ? 'bg-rose-500 text-white' : 'bg-slate-100 text-slate-600'}`}>Hub</button>
                                <button onClick={() => { setView('calendar'); setIsMenuOpen(false); }} className={`flex-1 py-2 rounded-lg text-sm font-bold ${view === 'calendar' ? 'bg-rose-500 text-white' : 'bg-slate-100 text-slate-600'}`}>Kalender</button>
                                <button onClick={() => { setView('map'); setIsMenuOpen(false); }} className={`flex-1 py-2 rounded-lg text-sm font-bold ${view === 'map' ? 'bg-rose-500 text-white' : 'bg-slate-100 text-slate-600'}`}>Karte</button>
                            </div>
                            
                            {(view === 'hub' || view === 'map') && (
                                <div className="space-y-3">
                                    <div className="flex gap-2 overflow-x-auto no-scrollbar pb-1">
                                        <button onClick={() => setCityFilter("Favs")} className={`px-4 py-2 rounded-lg text-xs font-bold whitespace-nowrap ${cityFilter === "Favs" ? 'bg-rose-500 text-white' : 'bg-rose-50 text-rose-600'}`}>â¤ï¸ Favs</button>
                                        {cities.map(c => (
                                            <button key={c} onClick={() => setCityFilter(c)} className={`px-4 py-2 rounded-lg text-xs font-bold whitespace-nowrap ${cityFilter === c ? 'bg-slate-800 text-white' : 'bg-slate-100 text-slate-600'}`}>
                                                {c === "Transfer" ? "ðŸš„" : c.toUpperCase()}
                                            </button>
                                        ))}
                                    </div>
                                    {cityFilter !== "Transfer" && cityFilter !== "Favs" && (
                                        <div className="flex gap-2 overflow-x-auto no-scrollbar">
                                            {["Alle", "Essen", "AktivitÃ¤t", "Party"].map(cat => (
                                                <button key={cat} onClick={() => setCatFilter(cat)} className={`px-3 py-1.5 rounded-full text-[10px] font-bold border ${catFilter === cat ? 'bg-rose-100 border-rose-300 text-rose-700' : 'bg-white border-slate-200 text-slate-500'}`}>{cat}</button>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    </div>
                    
                    <main className="max-w-7xl mx-auto">
                        {view === 'hub' ? (
                            <div className="p-4">
                                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-6">
                                    {filteredDB.map(item => (
                                        <Card 
                                            key={item.id} 
                                            item={item} 
                                            onShowAlternatives={handleShowAlternatives} 
                                            toggleFav={toggleFav}
                                            isFav={favs.includes(item.id)}
                                            onToast={triggerToast}
                                        />
                                    ))}
                                </div>
                                {filteredDB.length === 0 && (
                                    <div className="text-center py-20 text-rose-300 flex flex-col items-center">
                                        <Icon name="heart-crack" className="w-12 h-12 mb-2 opacity-50"/>
                                        <p>Keine EintrÃ¤ge gefunden.</p>
                                    </div>
                                )}
                            </div>
                        ) : view === 'calendar' ? (
                            <TripCalendar />
                        ) : (
                            <div className="p-4 fade-in h-full">
                                <div className="bg-white rounded-3xl p-2 shadow-lg h-full border-4 border-white">
                                    <MapView items={filteredDB} activeCity={cityFilter === 'Favs' ? 'Budapest' : cityFilter} />
                                </div>
                                <div className="mt-4 text-center text-xs text-slate-400 font-bold bg-white/50 inline-block px-4 py-2 rounded-full backdrop-blur-sm mx-auto flex justify-center border border-white">
                                    <span className="mr-3">ðŸ” Essen</span>
                                    <span className="mr-3">ðŸ° AktivitÃ¤t</span>
                                    <span className="mr-3">ðŸ¸ Party</span>
                                    <span>ðŸš† Transport</span>
                                </div>
                            </div>
                        )}
                    </main>

                    <StaticAlternativesModal isOpen={modalOpen} onClose={() => setModalOpen(false)} currentItem={modalItem} />
                    <Toast message={toastMsg} isVisible={showToast} onClose={() => setShowToast(false)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
